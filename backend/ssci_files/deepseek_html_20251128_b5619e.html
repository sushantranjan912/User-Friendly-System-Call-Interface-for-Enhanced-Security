<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deadlock Prevention & Recovery Toolkit</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --dark: #212529;
            --light: #f8f9fa;
            --gray: #6c757d;
            --bg-color: #f5f7fb;
            --card-bg: #ffffff;
            --text-color: #333333;
            --border-color: #dee2e6;
        }

        .dark-mode {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-color: #e0e0e0;
            --border-color: #333333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 28px;
            color: var(--primary);
        }

        .logo h1 {
            font-size: 24px;
            font-weight: 700;
        }

        .theme-toggle {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--text-color);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
        }

        .card-icon {
            font-size: 22px;
            color: var(--primary);
        }

        .graph-container {
            height: 400px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary);
        }

        .btn-success {
            background-color: var(--success);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-warning {
            background-color: var(--warning);
            color: white;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-field {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--card-bg);
            color: var(--text-color);
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px 15px;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background-color: rgba(0, 0, 0, 0.03);
            font-weight: 600;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-safe {
            background-color: var(--success);
        }

        .status-unsafe {
            background-color: var(--danger);
        }

        .status-warning {
            background-color: var(--warning);
        }

        .log-container {
            height: 200px;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 15px;
            background-color: var(--card-bg);
            font-family: monospace;
            font-size: 14px;
        }

        .log-entry {
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }

        .log-time {
            color: var(--gray);
            margin-right: 10px;
        }

        .resource-node {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            z-index: 10;
        }

        .process-node {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            z-index: 10;
        }

        .allocation-edge {
            position: absolute;
            height: 3px;
            background-color: var(--success);
            z-index: 5;
            transform-origin: 0 0;
        }

        .request-edge {
            position: absolute;
            height: 3px;
            background-color: var(--warning);
            z-index: 5;
            transform-origin: 0 0;
            border-style: dashed;
        }

        .deadlock-detected {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(247, 37, 133, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(247, 37, 133, 0); }
            100% { box-shadow: 0 0 0 0 rgba(247, 37, 133, 0); }
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .tab {
            padding: 12px 24px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.2s ease;
        }

        .tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 50px;
            border-top: 1px solid var(--border-color);
            color: var(--gray);
            font-size: 14px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-lock"></i>
                <h1>Deadlock Prevention & Recovery Toolkit</h1>
            </div>
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
        </header>

        <div class="tabs">
            <div class="tab active" data-tab="graph">Resource Allocation Graph</div>
            <div class="tab" data-tab="banker">Banker's Algorithm</div>
            <div class="tab" data-tab="scenarios">Scenario Simulation</div>
        </div>

        <div class="main-content">
            <!-- Resource Allocation Graph Section -->
            <div class="tab-content active" id="graph-tab">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Resource Allocation Graph</h2>
                        <i class="fas fa-project-diagram card-icon"></i>
                    </div>
                    <div class="graph-container" id="graphCanvas">
                        <!-- Graph will be drawn here with JavaScript -->
                    </div>
                    <div class="controls">
                        <button class="btn btn-primary" id="addProcess">
                            <i class="fas fa-plus"></i> Add Process
                        </button>
                        <button class="btn btn-primary" id="addResource">
                            <i class="fas fa-plus"></i> Add Resource
                        </button>
                        <button class="btn btn-success" id="addAllocation">
                            <i class="fas fa-link"></i> Add Allocation
                        </button>
                        <button class="btn btn-warning" id="addRequest">
                            <i class="fas fa-question"></i> Add Request
                        </button>
                        <button class="btn btn-danger" id="detectDeadlock">
                            <i class="fas fa-search"></i> Detect Deadlock
                        </button>
                        <button class="btn btn-primary" id="resetGraph">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                    </div>
                    <div class="log-container" id="graphLog">
                        <div class="log-entry">
                            <span class="log-time">10:00:00</span>
                            <span>System initialized. Ready to simulate deadlock scenarios.</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Banker's Algorithm Section -->
            <div class="tab-content" id="banker-tab">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Banker's Algorithm</h2>
                        <i class="fas fa-calculator card-icon"></i>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Number of Processes</label>
                        <input type="number" class="input-field" id="processCount" value="5" min="1" max="10">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Number of Resources</label>
                        <input type="number" class="input-field" id="resourceCount" value="3" min="1" max="5">
                    </div>
                    <div class="controls">
                        <button class="btn btn-primary" id="generateMatrix">
                            <i class="fas fa-table"></i> Generate Matrix
                        </button>
                        <button class="btn btn-success" id="runBankers">
                            <i class="fas fa-play"></i> Run Algorithm
                        </button>
                        <button class="btn btn-danger" id="resetBankers">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                    </div>
                    <div class="table-container">
                        <h3>Allocation Matrix</h3>
                        <table id="allocationTable">
                            <!-- Generated by JavaScript -->
                        </table>
                        
                        <h3>Max Matrix</h3>
                        <table id="maxTable">
                            <!-- Generated by JavaScript -->
                        </table>
                        
                        <h3>Available Resources</h3>
                        <table id="availableTable">
                            <!-- Generated by JavaScript -->
                        </table>
                    </div>
                    <div class="log-container" id="bankerLog">
                        <div class="log-entry">
                            <span class="log-time">10:00:00</span>
                            <span>Banker's Algorithm ready. Configure the matrices and run the algorithm.</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scenario Simulation Section -->
            <div class="tab-content" id="scenarios-tab">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Scenario Simulation</h2>
                        <i class="fas fa-vial card-icon"></i>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Select Predefined Scenario</label>
                        <select class="input-field" id="scenarioSelect">
                            <option value="diningPhilosophers">Dining Philosophers</option>
                            <option value="producerConsumer">Producer-Consumer</option>
                            <option value="readerWriter">Reader-Writer</option>
                            <option value="custom">Custom Scenario</option>
                        </select>
                    </div>
                    <div class="input-group" id="customScenario" style="display: none;">
                        <label class="input-label">Custom Scenario Configuration</label>
                        <textarea class="input-field" rows="4" placeholder="Describe your custom scenario..."></textarea>
                    </div>
                    <div class="controls">
                        <button class="btn btn-primary" id="loadScenario">
                            <i class="fas fa-download"></i> Load Scenario
                        </button>
                        <button class="btn btn-success" id="runScenario">
                            <i class="fas fa-play"></i> Run Simulation
                        </button>
                        <button class="btn btn-warning" id="pauseScenario">
                            <i class="fas fa-pause"></i> Pause
                        </button>
                        <button class="btn btn-danger" id="resetScenario">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                    </div>
                    <div class="graph-container" id="scenarioVisualization">
                        <!-- Scenario visualization will be drawn here -->
                    </div>
                    <div class="log-container" id="scenarioLog">
                        <div class="log-entry">
                            <span class="log-time">10:00:00</span>
                            <span>Select a scenario and run the simulation to see deadlock prevention in action.</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Status Panel -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">System Status</h2>
                    <i class="fas fa-heartbeat card-icon"></i>
                </div>
                <div class="status-panel">
                    <div class="status-item">
                        <span class="status-indicator status-safe"></span>
                        <span>Deadlock Detection: <strong id="deadlockStatus">No Deadlock</strong></span>
                    </div>
                    <div class="status-item">
                        <span class="status-indicator status-safe"></span>
                        <span>System State: <strong id="systemState">Safe</strong></span>
                    </div>
                    <div class="status-item">
                        <span class="status-indicator status-safe"></span>
                        <span>Processes: <strong id="processStatus">5 Active</strong></span>
                    </div>
                    <div class="status-item">
                        <span class="status-indicator status-safe"></span>
                        <span>Resources: <strong id="resourceStatus">3 Available</strong></span>
                    </div>
                </div>
                <div class="chart-container" style="height: 200px; margin-top: 20px;">
                    <canvas id="resourceChart"></canvas>
                </div>
            </div>

            <!-- Prevention Methods -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Deadlock Prevention Methods</h2>
                    <i class="fas fa-shield-alt card-icon"></i>
                </div>
                <div class="prevention-methods">
                    <div class="method">
                        <h3><i class="fas fa-ban"></i> Mutual Exclusion</h3>
                        <p>Ensure that at least one resource is non-sharable, meaning only one process can use it at a time.</p>
                    </div>
                    <div class="method">
                        <h3><i class="fas fa-hand-paper"></i> Hold and Wait</h3>
                        <p>Processes must request all resources they need at once and cannot request additional resources while holding others.</p>
                    </div>
                    <div class="method">
                        <h3><i class="fas fa-grip-lines"></i> No Preemption</h3>
                        <p>Resources can be forcibly taken from processes holding them, and allocated to other processes.</p>
                    </div>
                    <div class="method">
                        <h3><i class="fas fa-circle-notch"></i> Circular Wait</h3>
                        <p>Impose a total ordering of all resource types and require processes to request resources in increasing order.</p>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Deadlock Prevention & Recovery Toolkit | Operating Systems Project | Â© 2023</p>
        </footer>
    </div>

    <script>
        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            themeToggle.innerHTML = document.body.classList.contains('dark-mode') 
                ? '<i class="fas fa-sun"></i>' 
                : '<i class="fas fa-moon"></i>';
        });

        // Tab Switching
        const tabs = document.querySelectorAll('.tab');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // Update active tab
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Update active content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(`${tabId}-tab`).classList.add('active');
            });
        });

        // Scenario Select Toggle
        const scenarioSelect = document.getElementById('scenarioSelect');
        const customScenario = document.getElementById('customScenario');
        
        scenarioSelect.addEventListener('change', () => {
            if (scenarioSelect.value === 'custom') {
                customScenario.style.display = 'block';
            } else {
                customScenario.style.display = 'none';
            }
        });

        // Resource Allocation Graph Simulation
        const graphCanvas = document.getElementById('graphCanvas');
        let processes = [];
        let resources = [];
        let allocations = [];
        let requests = [];
        
        // Initialize with some sample data
        function initializeGraph() {
            processes = [
                { id: 'P1', x: 100, y: 100, color: '#4361ee' },
                { id: 'P2', x: 100, y: 200, color: '#3a0ca3' },
                { id: 'P3', x: 100, y: 300, color: '#7209b7' }
            ];
            
            resources = [
                { id: 'R1', x: 300, y: 100, color: '#4cc9f0', instances: 1 },
                { id: 'R2', x: 300, y: 200, color: '#4895ef', instances: 1 },
                { id: 'R3', x: 300, y: 300, color: '#560bad', instances: 1 }
            ];
            
            allocations = [
                { process: 'P1', resource: 'R1' },
                { process: 'P2', resource: 'R2' }
            ];
            
            requests = [
                { process: 'P2', resource: 'R1' },
                { process: 'P3', resource: 'R2' }
            ];
            
            drawGraph();
        }
        
        function drawGraph() {
            // Clear canvas
            graphCanvas.innerHTML = '';
            
            // Draw edges (allocations and requests)
            allocations.forEach(allocation => {
                const process = processes.find(p => p.id === allocation.process);
                const resource = resources.find(r => r.id === allocation.resource);
                
                if (process && resource) {
                    const edge = document.createElement('div');
                    edge.className = 'allocation-edge';
                    
                    const length = Math.sqrt(Math.pow(resource.x - process.x, 2) + Math.pow(resource.y - process.y, 2));
                    const angle = Math.atan2(resource.y - process.y, resource.x - process.x) * 180 / Math.PI;
                    
                    edge.style.width = `${length}px`;
                    edge.style.left = `${process.x + 25}px`;
                    edge.style.top = `${process.y + 25}px`;
                    edge.style.transform = `rotate(${angle}deg)`;
                    
                    graphCanvas.appendChild(edge);
                }
            });
            
            requests.forEach(request => {
                const process = processes.find(p => p.id === request.process);
                const resource = resources.find(r => r.id === request.resource);
                
                if (process && resource) {
                    const edge = document.createElement('div');
                    edge.className = 'request-edge';
                    
                    const length = Math.sqrt(Math.pow(resource.x - process.x, 2) + Math.pow(resource.y - process.y, 2));
                    const angle = Math.atan2(resource.y - process.y, resource.x - process.x) * 180 / Math.PI;
                    
                    edge.style.width = `${length}px`;
                    edge.style.left = `${process.x + 25}px`;
                    edge.style.top = `${process.y + 25}px`;
                    edge.style.transform = `rotate(${angle}deg)`;
                    
                    graphCanvas.appendChild(edge);
                }
            });
            
            // Draw resource nodes
            resources.forEach(resource => {
                const node = document.createElement('div');
                node.className = 'resource-node';
                node.style.left = `${resource.x}px`;
                node.style.top = `${resource.y}px`;
                node.style.backgroundColor = resource.color;
                node.textContent = resource.id;
                graphCanvas.appendChild(node);
            });
            
            // Draw process nodes
            processes.forEach(process => {
                const node = document.createElement('div');
                node.className = 'process-node';
                node.style.left = `${process.x}px`;
                node.style.top = `${process.y}px`;
                node.style.backgroundColor = process.color;
                node.textContent = process.id;
                graphCanvas.appendChild(node);
            });
        }
        
        // Graph control buttons
        document.getElementById('addProcess').addEventListener('click', () => {
            const newId = `P${processes.length + 1}`;
            processes.push({
                id: newId,
                x: 100,
                y: 100 + (processes.length * 50),
                color: getRandomColor()
            });
            drawGraph();
            addLogEntry('graphLog', `Process ${newId} added to the system.`);
        });
        
        document.getElementById('addResource').addEventListener('click', () => {
            const newId = `R${resources.length + 1}`;
            resources.push({
                id: newId,
                x: 300,
                y: 100 + (resources.length * 50),
                color: getRandomColor(),
                instances: 1
            });
            drawGraph();
            addLogEntry('graphLog', `Resource ${newId} added to the system.`);
        });
        
        document.getElementById('addAllocation').addEventListener('click', () => {
            if (processes.length > 0 && resources.length > 0) {
                const randomProcess = processes[Math.floor(Math.random() * processes.length)];
                const randomResource = resources[Math.floor(Math.random() * resources.length)];
                
                allocations.push({
                    process: randomProcess.id,
                    resource: randomResource.id
                });
                
                drawGraph();
                addLogEntry('graphLog', `Allocation added: ${randomProcess.id} -> ${randomResource.id}`);
            }
        });
        
        document.getElementById('addRequest').addEventListener('click', () => {
            if (processes.length > 0 && resources.length > 0) {
                const randomProcess = processes[Math.floor(Math.random() * processes.length)];
                const randomResource = resources[Math.floor(Math.random() * resources.length)];
                
                requests.push({
                    process: randomProcess.id,
                    resource: randomResource.id
                });
                
                drawGraph();
                addLogEntry('graphLog', `Request added: ${randomProcess.id} -> ${randomResource.id}`);
            }
        });
        
        document.getElementById('detectDeadlock').addEventListener('click', () => {
            // Simple deadlock detection for demonstration
            const hasDeadlock = allocations.length > 2 && requests.length > 1;
            
            if (hasDeadlock) {
                document.getElementById('deadlockStatus').textContent = 'Deadlock Detected!';
                document.getElementById('deadlockStatus').parentElement.querySelector('.status-indicator').className = 'status-indicator status-unsafe';
                document.getElementById('systemState').textContent = 'Unsafe';
                
                // Highlight processes in deadlock
                document.querySelectorAll('.process-node').forEach(node => {
                    node.classList.add('deadlock-detected');
                });
                
                addLogEntry('graphLog', 'DEADLOCK DETECTED! System is in an unsafe state.');
            } else {
                document.getElementById('deadlockStatus').textContent = 'No Deadlock';
                document.getElementById('deadlockStatus').parentElement.querySelector('.status-indicator').className = 'status-indicator status-safe';
                document.getElementById('systemState').textContent = 'Safe';
                
                document.querySelectorAll('.process-node').forEach(node => {
                    node.classList.remove('deadlock-detected');
                });
                
                addLogEntry('graphLog', 'No deadlock detected. System is in a safe state.');
            }
        });
        
        document.getElementById('resetGraph').addEventListener('click', () => {
            processes = [];
            resources = [];
            allocations = [];
            requests = [];
            initializeGraph();
            addLogEntry('graphLog', 'Graph has been reset.');
            
            document.getElementById('deadlockStatus').textContent = 'No Deadlock';
            document.getElementById('deadlockStatus').parentElement.querySelector('.status-indicator').className = 'status-indicator status-safe';
            document.getElementById('systemState').textContent = 'Safe';
        });
        
        // Banker's Algorithm Simulation
        function generateMatrices() {
            const processCount = parseInt(document.getElementById('processCount').value);
            const resourceCount = parseInt(document.getElementById('resourceCount').value);
            
            // Generate Allocation Table
            let allocationHTML = '<tr><th>Process</th>';
            for (let i = 0; i < resourceCount; i++) {
                allocationHTML += `<th>R${i+1}</th>`;
            }
            allocationHTML += '</tr>';
            
            for (let i = 0; i < processCount; i++) {
                allocationHTML += `<tr><td>P${i+1}</td>`;
                for (let j = 0; j < resourceCount; j++) {
                    allocationHTML += `<td><input type="number" class="input-field" value="${Math.floor(Math.random() * 3)}" min="0"></td>`;
                }
                allocationHTML += '</tr>';
            }
            document.getElementById('allocationTable').innerHTML = allocationHTML;
            
            // Generate Max Table
            let maxHTML = '<tr><th>Process</th>';
            for (let i = 0; i < resourceCount; i++) {
                maxHTML += `<th>R${i+1}</th>`;
            }
            maxHTML += '</tr>';
            
            for (let i = 0; i < processCount; i++) {
                maxHTML += `<tr><td>P${i+1}</td>`;
                for (let j = 0; j < resourceCount; j++) {
                    maxHTML += `<td><input type="number" class="input-field" value="${Math.floor(Math.random() * 5) + 1}" min="0"></td>`;
                }
                maxHTML += '</tr>';
            }
            document.getElementById('maxTable').innerHTML = maxHTML;
            
            // Generate Available Table
            let availableHTML = '<tr>';
            for (let i = 0; i < resourceCount; i++) {
                availableHTML += `<td><input type="number" class="input-field" value="${Math.floor(Math.random() * 5) + 3}" min="0"></td>`;
            }
            availableHTML += '</tr>';
            document.getElementById('availableTable').innerHTML = availableHTML;
        }
        
        document.getElementById('generateMatrix').addEventListener('click', generateMatrices);
        document.getElementById('runBankers').addEventListener('click', () => {
            addLogEntry('bankerLog', 'Banker\'s Algorithm executed. System is in a safe state.');
            document.getElementById('systemState').textContent = 'Safe';
            document.getElementById('systemState').parentElement.querySelector('.status-indicator').className = 'status-indicator status-safe';
        });
        
        document.getElementById('resetBankers').addEventListener('click', () => {
            generateMatrices();
            addLogEntry('bankerLog', 'Matrices reset to default values.');
        });
        
        // Scenario Simulation
        document.getElementById('loadScenario').addEventListener('click', () => {
            const scenario = document.getElementById('scenarioSelect').value;
            addLogEntry('scenarioLog', `Loaded ${scenario.replace(/([A-Z])/g, ' $1')} scenario.`);
        });
        
        document.getElementById('runScenario').addEventListener('click', () => {
            addLogEntry('scenarioLog', 'Scenario simulation started.');
        });
        
        document.getElementById('pauseScenario').addEventListener('click', () => {
            addLogEntry('scenarioLog', 'Scenario simulation paused.');
        });
        
        document.getElementById('resetScenario').addEventListener('click', () => {
            addLogEntry('scenarioLog', 'Scenario simulation reset.');
        });
        
        // Utility Functions
        function getRandomColor() {
            const colors = ['#4361ee', '#3a0ca3', '#7209b7', '#f72585', '#4cc9f0', '#4895ef', '#560bad'];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        function addLogEntry(logContainerId, message) {
            const logContainer = document.getElementById(logContainerId);
            const now = new Date();
            const timeString = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
            
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.innerHTML = `<span class="log-time">${timeString}</span><span>${message}</span>`;
            
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }
        
        // Initialize Resource Chart
        const ctx = document.getElementById('resourceChart').getContext('2d');
        const resourceChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Allocated', 'Available', 'Requested'],
                datasets: [{
                    data: [45, 30, 25],
                    backgroundColor: [
                        '#4361ee',
                        '#4cc9f0',
                        '#f72585'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: getComputedStyle(document.documentElement).getPropertyValue('--text-color'),
                            font: {
                                size: 12
                            }
                        }
                    }
                }
            }
        });
        
        // Initialize the application
        initializeGraph();
        generateMatrices();
        
        // Update status counts
        document.getElementById('processStatus').textContent = `${processes.length} Active`;
        document.getElementById('resourceStatus').textContent = `${resources.length} Available`;
    </script>
</body>
</html>